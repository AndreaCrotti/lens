<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Control.Lens.Zipper</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Control-Lens-Zipper.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Control-Lens-Zipper.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">lens-3.6: Lenses, Folds and Traversals</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Portability</th><td>non-portable</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Maintainer</th><td>Edward Kmett &lt;ekmett@gmail.com&gt;</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Control.Lens.Zipper</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Zippers
</a><ul><li><a href="#g:2">Focusing
</a></li><li><a href="#g:3">Horizontal Movement
</a></li><li><a href="#g:4">Lateral Movement
</a></li><li><a href="#g:5">Movement Combinators
</a></li><li><a href="#g:6">Absolute Positioning
</a></li><li><a href="#g:7">Closing the zipper
</a></li><li><a href="#g:8">Recording
</a></li><li><a href="#g:9">Unsafe Movement
</a></li></ul></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module provides a <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> with fairly strong type checking guarantees.
</p><p>The code here is inspired by Brandon Simmons' <code>zippo</code> package, but uses
 a slightly different approach to represent the <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> that makes the whole thing
 look like his breadcrumb trail, and can move side-to-side through traversals.
</p><p>Some examples types:
</p><dl><dt><code><code><a href="Control-Lens-Zipper.html#t:Top">Top</a></code> <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> a</code></dt><dd> represents a trivial <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> with its focus at the root.
</dd><dt><code><code><a href="Control-Lens-Zipper.html#t:Top">Top</a></code> <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> <code><a href="Data-Tree.html#t:Tree">Tree</a></code> a <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> a</code></dt><dd> represents a zipper that starts with a
   <code><a href="Data-Tree.html#t:Tree">Tree</a></code> and descends in a single step to values of type <code>a</code>.
</dd><dt><code><code><a href="Control-Lens-Zipper.html#t:Top">Top</a></code> <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> <code><a href="Data-Tree.html#t:Tree">Tree</a></code> a <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> <code><a href="Data-Tree.html#t:Tree">Tree</a></code> a <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> <code><a href="Data-Tree.html#t:Tree">Tree</a></code> a</code></dt><dd> represents a <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> into a
   <code><a href="Data-Tree.html#t:Tree">Tree</a></code> with an intermediate bookmarked <code><a href="Data-Tree.html#t:Tree">Tree</a></code>,
   focusing in yet another <code><a href="Data-Tree.html#t:Tree">Tree</a></code>.
</dd></dl><p>Since individual levels of a zipper are managed by an arbitrary <code>Traversal</code>,
 you can move left and right through the <code>Traversal</code> selecting neighboring elements.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>zipper (&quot;hello&quot;,&quot;world&quot;) &amp; down _1 &amp; fromWithin traverse &amp; focus .~ 'J' &amp; farthest right &amp; focus .~ 'y' &amp; rezip
</code></strong>(&quot;Jelly&quot;,&quot;world&quot;)
</pre><p>This is particularly powerful when compiled with <code><a href="Control-Lens-Plated.html#t:plate">plate</a></code>,
 <code><a href="Data-Data-Lens.html#t:uniplate">uniplate</a></code> or <code><a href="Data-Data-Lens.html#t:biplate">biplate</a></code> for walking down into
 self-similar children in syntax trees and other structures.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="#t:Top">Top</a> </li><li class="src short"><span class="keyword">data</span>  p <a href="#t::-62-">:&gt;</a> a</li><li class="src short"><a href="#v:zipper">zipper</a> ::  a -&gt; <a href="Control-Lens-Zipper.html#t:Top">Top</a> <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a</li><li class="src short"><a href="#v:focus">focus</a> ::  <a href="Control-Lens-IndexedLens.html#t:SimpleIndexedLens">SimpleIndexedLens</a> (<a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)) (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) a</li><li class="src short"><a href="#v:up">up</a> ::  ((a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> c) -&gt; a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b</li><li class="src short"><a href="#v:down">down</a> ::  <a href="Control-Lens-Type.html#t:SimpleLensLike">SimpleLensLike</a> (<a href="Control-Lens-Internal.html#t:Context">Context</a> c c) b c -&gt; (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> c</li><li class="src short"><a href="#v:within">within</a> ::  <a href="Control-Lens-Type.html#t:SimpleLensLike">SimpleLensLike</a> (<a href="Control-Lens-Internal.html#t:Bazaar">Bazaar</a> c c) b c -&gt; (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; Maybe ((a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> c)</li><li class="src short"><a href="#v:left">left</a> ::  (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; Maybe (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b)</li><li class="src short"><a href="#v:right">right</a> ::  (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; Maybe (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b)</li><li class="src short"><a href="#v:tug">tug</a> ::  (a -&gt; Maybe a) -&gt; a -&gt; a</li><li class="src short"><a href="#v:tugs">tugs</a> ::  (a -&gt; Maybe a) -&gt; Int -&gt; a -&gt; a</li><li class="src short"><a href="#v:jerks">jerks</a> ::  (a -&gt; Maybe a) -&gt; Int -&gt; a -&gt; Maybe a</li><li class="src short"><a href="#v:farthest">farthest</a> ::  (a -&gt; Maybe a) -&gt; a -&gt; a</li><li class="src short"><a href="#v:tooth">tooth</a> ::  (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; Int</li><li class="src short"><a href="#v:teeth">teeth</a> ::  (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; Int</li><li class="src short"><a href="#v:jerkTo">jerkTo</a> ::  Int -&gt; (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; Maybe (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b)</li><li class="src short"><a href="#v:tugTo">tugTo</a> ::  Int -&gt; (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b</li><li class="src short"><a href="#v:rezip">rezip</a> :: <a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a> h a =&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a> h a</li><li class="src short"><span class="keyword">type family</span> <a href="#t:Zipped">Zipped</a> h a </li><li class="src short"><span class="keyword">class</span>  <a href="#t:Zipper">Zipper</a> h a </li><li class="src short"><span class="keyword">data</span>  <a href="#t:Tape">Tape</a> k</li><li class="src short"><a href="#v:saveTape">saveTape</a> ::  (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; <a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b)</li><li class="src short"><a href="#v:restoreTape">restoreTape</a> ::  <a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a> h a -&gt; Maybe (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)</li><li class="src short"><a href="#v:restoreNearTape">restoreNearTape</a> ::  <a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a> h a -&gt; Maybe (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)</li><li class="src short"><a href="#v:fromWithin">fromWithin</a> ::  <a href="Control-Lens-Type.html#t:SimpleLensLike">SimpleLensLike</a> (<a href="Control-Lens-Internal.html#t:Bazaar">Bazaar</a> c c) b c -&gt; (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> c</li><li class="src short"><a href="#v:unsafelyRestoreTape">unsafelyRestoreTape</a> ::  <a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a> h a -&gt; h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a</li></ul></div><div id="interface"><h1 id="g:1">Zippers
</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Top" class="def">Top</a>  <a href="src/Control-Lens-Internal-Zipper.html#Top" class="link">Source</a></p><div class="doc"><p>This is used to represent the <code><a href="Control-Lens-Zipper.html#t:Top">Top</a></code> of the <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code>.
</p><p>Every <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code> starts with <code><a href="Control-Lens-Zipper.html#t:Top">Top</a></code>.
</p><p><em>e.g.</em> <code><code><a href="Control-Lens-Zipper.html#t:Top">Top</a></code> <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> a</code> is the trivial zipper.
</p></div><div class="subs instances"><p id="control.i:Top" class="caption collapser" onclick="toggleSection('i:Top')">Instances</p><div id="section.i:Top" class="show"><table><tr><td class="src"><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a> <a href="Control-Lens-Zipper.html#t:Top">Top</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  p <a name="t::-62-" class="def">:&gt;</a> a <a href="src/Control-Lens-Internal-Zipper.html#%3A%3E" class="link">Source</a></p><div class="doc"><p>This is the type of a <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code>. It visually resembes a 'breadcrumb trail' as
 used in website navigation. Each breadcrumb in the trail represents a level you
 can move up to.
</p><p>This type operator associates to the left, so you can use a type like
</p><pre><code><a href="Control-Lens-Zipper.html#t:Top">Top</a></code> <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> (<code>String</code>,<code>Double</code>) <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> <code>String</code> <code><a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a></code> <code>Char</code></pre><p>to represent a zipper from <code>(<code>String</code>,<code>Double</code>)</code> down to <code>Char</code> that has an intermediate
 crumb for the <code>String</code> containing the <code>Char</code>.
</p></div><div class="subs instances"><p id="control.i::-62-" class="caption collapser" onclick="toggleSection('i::-62-')">Instances</p><div id="section.i::-62-" class="show"><table><tr><td class="src"><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a> h b =&gt; <a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a> (<a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> h b) c</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:zipper" class="def">zipper</a> ::  a -&gt; <a href="Control-Lens-Zipper.html#t:Top">Top</a> <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a<a href="src/Control-Lens-Internal-Zipper.html#zipper" class="link">Source</a></p><div class="doc"><p>Construct a <code><a href="Control-Lens-Zipper.html#v:zipper">zipper</a></code> that can explore anything.
</p></div></div><h2 id="g:2">Focusing
</h2><div class="top"><p class="src"><a name="v:focus" class="def">focus</a> ::  <a href="Control-Lens-IndexedLens.html#t:SimpleIndexedLens">SimpleIndexedLens</a> (<a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)) (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) a<a href="src/Control-Lens-Internal-Zipper.html#focus" class="link">Source</a></p><div class="doc"><p>This <code><a href="Control-Lens-Type.html#t:Lens">Lens</a></code> views the current target of the <code><a href="Control-Lens-Zipper.html#v:zipper">zipper</a></code>.
</p></div></div><h2 id="g:3">Horizontal Movement
</h2><div class="top"><p class="src"><a name="v:up" class="def">up</a> ::  ((a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> c) -&gt; a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b<a href="src/Control-Lens-Internal-Zipper.html#up" class="link">Source</a></p><div class="doc"><p>Move the <code><a href="Control-Lens-Zipper.html#v:zipper">zipper</a></code> <code><a href="Control-Lens-Zipper.html#v:up">up</a></code>, closing the current level and focusing on the parent element.
</p></div></div><div class="top"><p class="src"><a name="v:down" class="def">down</a> ::  <a href="Control-Lens-Type.html#t:SimpleLensLike">SimpleLensLike</a> (<a href="Control-Lens-Internal.html#t:Context">Context</a> c c) b c -&gt; (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> c<a href="src/Control-Lens-Internal-Zipper.html#down" class="link">Source</a></p><div class="doc"><p>Step down into a <code><a href="Control-Lens-Type.html#t:Lens">Lens</a></code>. This is a constrained form of <code><a href="Control-Lens-Zipper.html#v:fromWithin">fromWithin</a></code> for when you know
 there is precisely one target.
</p><pre>
 <code><a href="Control-Lens-Zipper.html#v:down">down</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code><a href="Control-Lens-Type.html#t:Lens">Lens</a></code> b c -&gt; (a :&gt; b) -&gt; a :&gt; b :&gt; c
 <code><a href="Control-Lens-Zipper.html#v:down">down</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code>Iso</code> b c  -&gt; (a :&gt; b) -&gt; a :&gt; b :&gt; c
</pre></div></div><div class="top"><p class="src"><a name="v:within" class="def">within</a> ::  <a href="Control-Lens-Type.html#t:SimpleLensLike">SimpleLensLike</a> (<a href="Control-Lens-Internal.html#t:Bazaar">Bazaar</a> c c) b c -&gt; (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; Maybe ((a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> c)<a href="src/Control-Lens-Internal-Zipper.html#within" class="link">Source</a></p><div class="doc"><p>Step down into the <code>leftmost</code> entry of a <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code>.
</p><pre>
 <code><a href="Control-Lens-Zipper.html#v:within">within</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code> b c -&gt; (a :&gt; b) -&gt; Maybe (a :&gt; b :&gt; c)
 <code><a href="Control-Lens-Zipper.html#v:within">within</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code><a href="Control-Lens-Type.html#t:Lens">Lens</a></code> b c      -&gt; (a :&gt; b) -&gt; Maybe (a :&gt; b :&gt; c)
 <code><a href="Control-Lens-Zipper.html#v:within">within</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code>Iso</code> b c       -&gt; (a :&gt; b) -&gt; Maybe (a :&gt; b :&gt; c)
</pre></div></div><h2 id="g:4">Lateral Movement
</h2><div class="top"><p class="src"><a name="v:left" class="def">left</a> ::  (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; Maybe (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b)<a href="src/Control-Lens-Internal-Zipper.html#left" class="link">Source</a></p><div class="doc"><p>Pull the <code><a href="Control-Lens-Zipper.html#v:zipper">zipper</a></code> <code><a href="Control-Lens-Zipper.html#v:left">left</a></code> within the current <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:right" class="def">right</a> ::  (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; Maybe (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b)<a href="src/Control-Lens-Internal-Zipper.html#right" class="link">Source</a></p><div class="doc"><p>Pull the entry one entry to the <code><a href="Control-Lens-Zipper.html#v:right">right</a></code>
</p></div></div><h2 id="g:5">Movement Combinators
</h2><div class="top"><p class="src"><a name="v:tug" class="def">tug</a> ::  (a -&gt; Maybe a) -&gt; a -&gt; a<a href="src/Control-Lens-Internal-Zipper.html#tug" class="link">Source</a></p><div class="doc"><p>This allows you to safely 'tug left' or 'tug right' on a <code><a href="Control-Lens-Zipper.html#v:zipper">zipper</a></code>.
</p><p>The more general signature allows its use in other circumstances, however.
</p></div></div><div class="top"><p class="src"><a name="v:tugs" class="def">tugs</a> ::  (a -&gt; Maybe a) -&gt; Int -&gt; a -&gt; a<a href="src/Control-Lens-Internal-Zipper.html#tugs" class="link">Source</a></p><div class="doc"><p>This allows you to safely 'tug left' or 'tug right' on a <code><a href="Control-Lens-Zipper.html#v:zipper">zipper</a></code>, moving multiple steps in a given direction,
 stopping at the last place you couldn't move from.
</p></div></div><div class="top"><p class="src"><a name="v:jerks" class="def">jerks</a> ::  (a -&gt; Maybe a) -&gt; Int -&gt; a -&gt; Maybe a<a href="src/Control-Lens-Internal-Zipper.html#jerks" class="link">Source</a></p><div class="doc"><p>This allows for you to repeatedly pull a <code><a href="Control-Lens-Zipper.html#v:zipper">zipper</a></code> in a given direction, failing if it falls of the end.
</p></div></div><div class="top"><p class="src"><a name="v:farthest" class="def">farthest</a> ::  (a -&gt; Maybe a) -&gt; a -&gt; a<a href="src/Control-Lens-Internal-Zipper.html#farthest" class="link">Source</a></p><div class="doc"><p>Move in a direction as far as you can go, then stop.
</p></div></div><h2 id="g:6">Absolute Positioning
</h2><div class="top"><p class="src"><a name="v:tooth" class="def">tooth</a> ::  (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; Int<a href="src/Control-Lens-Internal-Zipper.html#tooth" class="link">Source</a></p><div class="doc"><p>Return the index into the current <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code> within the current level of the zipper.
</p><pre><code><a href="Control-Lens-Zipper.html#v:jerkTo">jerkTo</a></code> (<code><a href="Control-Lens-Zipper.html#v:tooth">tooth</a></code> l) l = Just'</pre></div></div><div class="top"><p class="src"><a name="v:teeth" class="def">teeth</a> ::  (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; Int<a href="src/Control-Lens-Internal-Zipper.html#teeth" class="link">Source</a></p><div class="doc"><p>Returns the number of siblings at the current level in the <code><a href="Control-Lens-Zipper.html#v:zipper">zipper</a></code>.
</p><pre><code><a href="Control-Lens-Zipper.html#v:teeth">teeth</a></code> z <code>&gt;=</code> 1</pre><p><em>NB:</em> If the current <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code> targets an infinite number of elements then this may not terminate.
</p></div></div><div class="top"><p class="src"><a name="v:jerkTo" class="def">jerkTo</a> ::  Int -&gt; (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; Maybe (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b)<a href="src/Control-Lens-Internal-Zipper.html#jerkTo" class="link">Source</a></p><div class="doc"><p>Move the <code><a href="Control-Lens-Zipper.html#v:zipper">zipper</a></code> horizontally to the element in the <code>n</code>th position in the current level, absolutely indexed, starting with the <code><code><a href="Control-Lens-Zipper.html#v:farthest">farthest</a></code> <code><a href="Control-Lens-Zipper.html#v:left">left</a></code></code> as <code>0</code>.
</p><p>This returns <code>Nothing</code> if the target element doesn't exist.
</p><pre><code><a href="Control-Lens-Zipper.html#v:jerkTo">jerkTo</a></code> n &#8801; <code><a href="Control-Lens-Zipper.html#v:jerks">jerks</a></code> <code><a href="Control-Lens-Zipper.html#v:right">right</a></code> n . <code><a href="Control-Lens-Zipper.html#v:farthest">farthest</a></code> <code><a href="Control-Lens-Zipper.html#v:left">left</a></code></pre></div></div><div class="top"><p class="src"><a name="v:tugTo" class="def">tugTo</a> ::  Int -&gt; (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b<a href="src/Control-Lens-Internal-Zipper.html#tugTo" class="link">Source</a></p><div class="doc"><p>Move the <code><a href="Control-Lens-Zipper.html#v:zipper">zipper</a></code> horizontally to the element in the <code>n</code>th position of the current level, absolutely indexed, starting with the <code><code><a href="Control-Lens-Zipper.html#v:farthest">farthest</a></code> <code><a href="Control-Lens-Zipper.html#v:left">left</a></code></code> as <code>0</code>.
</p><p>If the element at that position doesn't exist, then this will clamp to the range <code>0 &lt;= n &lt; <code><a href="Control-Lens-Zipper.html#v:teeth">teeth</a></code></code>.
</p><pre><code><a href="Control-Lens-Zipper.html#v:tugTo">tugTo</a></code> n &#8801; <code><a href="Control-Lens-Zipper.html#v:tugs">tugs</a></code> <code><a href="Control-Lens-Zipper.html#v:right">right</a></code> n . <code><a href="Control-Lens-Zipper.html#v:farthest">farthest</a></code> <code><a href="Control-Lens-Zipper.html#v:left">left</a></code></pre></div></div><h2 id="g:7">Closing the zipper
</h2><div class="top"><p class="src"><a name="v:rezip" class="def">rezip</a> :: <a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a> h a =&gt; (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a> h a<a href="src/Control-Lens-Internal-Zipper.html#rezip" class="link">Source</a></p><div class="doc"><p>Close something back up that you opened as a <code><a href="Control-Lens-Zipper.html#v:zipper">zipper</a></code>.
</p></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a name="t:Zipped" class="def">Zipped</a> h a <a href="src/Control-Lens-Internal-Zipper.html#Zipped" class="link">Source</a></p><div class="doc"><p>This represents the type a zipper will have when it is fully <code><a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a></code> back up.
</p></div></div><div class="top"><p class="src"><span class="keyword">class</span>  <a name="t:Zipper" class="def">Zipper</a> h a <a href="src/Control-Lens-Internal-Zipper.html#Zipper" class="link">Source</a></p><div class="doc"><p>This enables us to pull the <code><a href="Control-Lens-Zipper.html#v:zipper">zipper</a></code> back up to the <code><a href="Control-Lens-Zipper.html#t:Top">Top</a></code>.
</p></div><div class="subs instances"><p id="control.i:Zipper" class="caption collapser" onclick="toggleSection('i:Zipper')">Instances</p><div id="section.i:Zipper" class="show"><table><tr><td class="src"><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a> <a href="Control-Lens-Zipper.html#t:Top">Top</a> a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a> h b =&gt; <a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a> (<a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> h b) c</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h2 id="g:8">Recording
</h2><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Tape" class="def">Tape</a> k <a href="src/Control-Lens-Internal-Zipper.html#Tape" class="link">Source</a></p><div class="doc"><p>A <code><a href="Control-Lens-Zipper.html#t:Tape">Tape</a></code> is a recorded path through the <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code> chain of a <code><a href="Control-Lens-Zipper.html#t:Zipper">Zipper</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:saveTape" class="def">saveTape</a> ::  (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; <a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b)<a href="src/Control-Lens-Internal-Zipper.html#saveTape" class="link">Source</a></p><div class="doc"><p>Save the current path as as a <code><a href="Control-Lens-Zipper.html#t:Tape">Tape</a></code> we can play back later.
</p></div></div><div class="top"><p class="src"><a name="v:restoreTape" class="def">restoreTape</a> ::  <a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a> h a -&gt; Maybe (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)<a href="src/Control-Lens-Internal-Zipper.html#restoreTape" class="link">Source</a></p><div class="doc"><p>Restore ourselves to a previously recorded position precisely.
</p><p>If the position does not exist, then fail.
</p></div></div><div class="top"><p class="src"><a name="v:restoreNearTape" class="def">restoreNearTape</a> ::  <a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a> h a -&gt; Maybe (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a)<a href="src/Control-Lens-Internal-Zipper.html#restoreNearTape" class="link">Source</a></p><div class="doc"><p>Restore ourselves to a location near our previously recorded position.
</p><p>When moving left to right through a <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code>, if this will clamp at each level to the range <code>0 &lt;= k &lt; teeth</code>,
 so the only failures will occur when one of the sequence of downward traversals find no targets.
</p></div></div><h2 id="g:9">Unsafe Movement
</h2><div class="top"><p class="src"><a name="v:fromWithin" class="def">fromWithin</a> ::  <a href="Control-Lens-Type.html#t:SimpleLensLike">SimpleLensLike</a> (<a href="Control-Lens-Internal.html#t:Bazaar">Bazaar</a> c c) b c -&gt; (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) -&gt; (a <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> b) <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> c<a href="src/Control-Lens-Internal-Zipper.html#fromWithin" class="link">Source</a></p><div class="doc"><p>Unsafely step down into a <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code> that is <em>assumed</em> to be non-empty.
</p><p>If this invariant is not met then this will usually result in an error!
</p><pre>
 <code><a href="Control-Lens-Zipper.html#v:fromWithin">fromWithin</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code><a href="Control-Lens-Traversal.html#t:Traversal">Traversal</a></code> b c -&gt; (a :&gt; b) -&gt; a :&gt; b :&gt; c
 <code><a href="Control-Lens-Zipper.html#v:fromWithin">fromWithin</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code><a href="Control-Lens-Type.html#t:Lens">Lens</a></code> b c      -&gt; (a :&gt; b) -&gt; a :&gt; b :&gt; c
 <code><a href="Control-Lens-Zipper.html#v:fromWithin">fromWithin</a></code> :: <code><a href="Control-Lens-Type.html#t:Simple">Simple</a></code> <code>Iso</code> b c       -&gt; (a :&gt; b) -&gt; a :&gt; b :&gt; c
</pre><p>You can reason about this function as if the definition was:
</p><pre><code><a href="Control-Lens-Zipper.html#v:fromWithin">fromWithin</a></code> l &#8801; <code>fromJust</code> <code>.</code> <code><a href="Control-Lens-Zipper.html#v:within">within</a></code> l</pre><p>but it is lazier in such a way that if this invariant is violated, some code
 can still succeed if it is lazy enough in the use of the focused value.
</p></div></div><div class="top"><p class="src"><a name="v:unsafelyRestoreTape" class="def">unsafelyRestoreTape</a> ::  <a href="Control-Lens-Zipper.html#t:Tape">Tape</a> (h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a) -&gt; <a href="Control-Lens-Zipper.html#t:Zipped">Zipped</a> h a -&gt; h <a href="Control-Lens-Zipper.html#t::-62-">:&gt;</a> a<a href="src/Control-Lens-Internal-Zipper.html#unsafelyRestoreTape" class="link">Source</a></p><div class="doc"><p>Restore ourselves to a previously recorded position.
</p><p>This *assumes* that nothing has been done in the meantime to affect the existence of anything on the entire path.
</p><p>Motions left or right are clamped, but all traversals included on the <code><a href="Control-Lens-Zipper.html#t:Tape">Tape</a></code> are assumed to be non-empty.
</p><p>Violate these assumptions at your own risk!
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.1</p></div></body></html>